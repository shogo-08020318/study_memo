# SELECT文の基本
### SELECT
列を出力するときに使う
基本的なSELECT文
```sql
SELECT <列名>, ・・・
  FROM <テーブル名>;
```
`SELECT`文には、`SELECT`句と`FROM`句からなる。
SELECT句：テーブルから出力したい**列**の名前を書き並べる。
FROM句：データを取り出す**テーブル**の名前を指定する。
例
`Shohin`テーブルから`shohin_id`、`shohin_mei`、`shiire_tanka`を取り出す
```sql
SELECT shohin_id, shohin_mei, shiire_tanka
  FROM Shohin;
 shohin_id |   shohin_mei   | shiire_tanka 
-----------+----------------+--------------
 0001      | Tシャツ        |          500
 0002      | 穴あけパンチ   |          320
 0003      | カッターシャツ |         2800
 0004      | 包丁           |         2800
 0005      | 圧力鍋         |         5000
 0006      | フォーク       |             
 0007      | おろしがね     |          790
 0008      | ボールペン     |             
(8 rows)
```

### すべての列を出力する
あるテーブルの全ての列を出力する場合、すべての列を意味する`*`を使う
```sql
SELECT *
  FROM <テーブル名>;
```
`Shohin`テーブルのすべての列を出力する
```sql
SELECT *
  FROM Shohin;
 shohin_id |   shohin_mei   | shohin_bunrui | hanbai_tanka | shiire_tanka |  torokubi  
-----------+----------------+---------------+--------------+--------------+------------
 0001      | Tシャツ        | 衣服          |         1000 |          500 | 2009-09-20
 0002      | 穴あけパンチ   | 事務用品      |          500 |          320 | 2009-09-11
 0003      | カッターシャツ | 衣服          |         4000 |         2800 | 
 0004      | 包丁           | キッチン用品  |         3000 |         2800 | 2009-09-20
 0005      | 圧力鍋         | キッチン用品  |         6800 |         5000 | 2009-01-15
 0006      | フォーク       | キッチン用品  |          500 |              | 2009-09-20
 0007      | おろしがね     | キッチン用品  |          880 |          790 | 2008-04-28
 0008      | ボールペン     | 事務用品      |          100 |              | 2009-11-11
(8 rows)
```
`*`を使うと以下のようなすべての列を指定した場合と等価である
```sql
SELECT shohin_id, shohin_mei, shohin_bunrui, hanbai_tanka,
       shiire_tanka, torokubi
  FROM Shohin;
 shohin_id |   shohin_mei   | shohin_bunrui | hanbai_tanka | shiire_tanka |  torokubi  
-----------+----------------+---------------+--------------+--------------+------------
 0001      | Tシャツ        | 衣服          |         1000 |          500 | 2009-09-20
 0002      | 穴あけパンチ   | 事務用品      |          500 |          320 | 2009-09-11
 0003      | カッターシャツ | 衣服          |         4000 |         2800 | 
 0004      | 包丁           | キッチン用品  |         3000 |         2800 | 2009-09-20
 0005      | 圧力鍋         | キッチン用品  |         6800 |         5000 | 2009-01-15
 0006      | フォーク       | キッチン用品  |          500 |              | 2009-09-20
 0007      | おろしがね     | キッチン用品  |          880 |          790 | 2008-04-28
 0008      | ボールペン     | 事務用品      |          100 |              | 2009-11-11
(8 rows)
```

### 列に別名をつける
SQL文では`ASキーワード`を使って列に`別名`をつけることができる
例
```sql
SELECT shohin_id AS id,
       shohin_mei AS namae,
       shiire_tanka AS tanka
  FROM Shohin;
  id  |     namae      | tanka 
------+----------------+-------
 0001 | Tシャツ        |   500
 0002 | 穴あけパンチ   |   320
 0003 | カッターシャツ |  2800
 0004 | 包丁           |  2800
 0005 | 圧力鍋         |  5000
 0006 | フォーク       |      
 0007 | おろしがね     |   790
 0008 | ボールペン     |      
(8 rows)
```
別名には日本語を使うこともできる
```sql
SELECT shohin_id AS "商品ID",
       shohin_mei AS "商品名",
       shiire_tanka AS "仕入単価"
  FROM Shohin;
 商品ID |     商品名     | 仕入単価 
--------+----------------+----------
 0001   | Tシャツ        |      500
 0002   | 穴あけパンチ   |      320
 0003   | カッターシャツ |     2800
 0004   | 包丁           |     2800
 0005   | 圧力鍋         |     5000
 0006   | フォーク       |         
 0007   | おろしがね     |      790
 0008   | ボールペン     |         
(8 rows)
```

### 定数の出力
`SELECT`文には列だけでなく定数を書くことができる。
１列目に`商品`という**文字列定数**を、
２列目に`38`という**数値定数**を、
３列目に`2009-02-24`という**日付定数**を`SELECT`句に記述して、`shohin_id`、`shohin_mei`と一緒に出力する。
```sql
SELECT '商品' AS mojiretsu, 38 AS kazu, '2009-02-24' AS hizuke,
       shohin_id, shohin_mei
  FROM Shohin;
 mojiretsu | kazu |   hizuke   | shohin_id |   shohin_mei   
-----------+------+------------+-----------+----------------
 商品      |   38 | 2009-02-24 | 0001      | Tシャツ
 商品      |   38 | 2009-02-24 | 0002      | 穴あけパンチ
 商品      |   38 | 2009-02-24 | 0003      | カッターシャツ
 商品      |   38 | 2009-02-24 | 0004      | 包丁
 商品      |   38 | 2009-02-24 | 0005      | 圧力鍋
 商品      |   38 | 2009-02-24 | 0006      | フォーク
 商品      |   38 | 2009-02-24 | 0007      | おろしがね
 商品      |   38 | 2009-02-24 | 0008      | ボールペン
(8 rows)
```

### 結果から重複行を取り除く
獣副業を取り除いて結果を得たいときは`SELECT`句で**DISTINCT**を使う。
```sql
SELECT DISTINCT <列名>
  FROM <テーブル名>;
```
`shohin_bunrui`で重複を取り除いて出力する。
```sql
SELECT DISTINCT shohin_bunrui
  FROM Shohin;
 shohin_bunrui 
---------------
 キッチン用品
 衣服
 事務用品
(3 rows)
```
**DISTINCT**を使ったとき、**NULL**も１種類のデータとして扱われる。
`shohin_tanka`に対して`DISTINCT`を使った場合
```sql
SELECT DISTINCT shiire_tanka
  FROM Shohin;
 shiire_tanka 
--------------
              ← NULLも含まれる
          320
          500
         2800
         5000
          790
(6 rows)
```
**DISTINCT**は、複数の列の前に置くこともできる。この場合、複数の列を組み合わせて重複する行が1つにまとめられる。
`SELECT`文では、`shohin_bunrui`列と`torokubi`列の組み合わせが全く同じ行が、1つの行にまとめられる。
```sql
SELECT DISTINCT shohin_bunrui, torokubi
  FROM Shohin;
 shohin_bunrui |  torokubi  
---------------+------------
 衣服          | 
 キッチン用品  | 2009-01-15
 衣服          | 2009-09-20
 キッチン用品  | 2008-04-28
 事務用品      | 2009-11-11
 事務用品      | 2009-09-11
 キッチン用品  | 2009-09-20
(7 rows)
```

### WHERE句による行の選択
「商品分類が衣服」だけの行など、何らかの条件に合う行だけを選択したいときに使う。
`SELECT`文では選択した異形の条件を**WHERE句**を指定する。
**WHERE句**には「ある列の値がこの文字と等しい」「ある列の値がこの数値以上」などの条件を指定でき、その条件にあった行だけを選択することができる。
```sql
SELECT <列名>, ...
  FROM <テーブル名>
 WHERE <条件>;
```
例として「商品分類が衣服」の行を選択する
```sql
SELECT shohin_mei, shohin_bunrui
  FROM Shohin
 WHERE shohin_bunrui = '衣服';
   shohin_mei   | shohin_bunrui 
----------------+---------------
 Tシャツ        | 衣服
 カッターシャツ | 衣服
(2 rows)
```
上記のSQL文は、`Shohin`テーブルのすべての行に対して`shohin_bunrui`が`衣服`であるか調べて該当する行を抽出し、`shohin_mei`と`shohin_bunrui`の列を出力する。
**WHERE句で指定した条件に合う行をまず選択し、その後にSELECT句で指定された列を出力する**
**SQLでは句の記述順が決まっているので、変えるとエラーになる**
```sql
SELECT shohin_mei, shohin_bunrui
 WHERE shohin_bunrui = '衣服'
  FROM Shohin;
ERROR:  syntax error at or near "FROM"
LINE 3:   FROM Shohin;
          ^
```
`WHERE句`は`FROM句`の直後書く

### コメントの書き方
- １行コメント
`--`の後に記述する。１行の中にしか書けない。
- 複数行コメント
`/*`と`*/`で囲った中に記述する。複数行にわたって描ける。

### メモ
日本語を入力するときの`シングルクォート('')`と`ダブルクォート("")`の使い分け
- シングルクォート：列名に日本語を使うとき
- ダブルクォート：データに日本語を使うとき
