# データの削除（DELETEの使い方）
### DROP TABLE文とDELETE文
データの削除は大きく2つある。
##### ①DROP TABLE文
テーブルそのものを削除する。
##### ②DELETE文
テーブルは残したまま、テーブル内のすべての行を削除する。

①はテーブルごとすべて削除するため、一度削除した後にデータを再登録するには、**CREATE TAVLE**でテーブルの作成をしないといけない。
それに対し、②はテーブルを残したままデータを削除することができるので、**INSERT**文でデータの再登録が可能である。
今回は、「データの削除」がテーマとなるため、データのみを削除する**DELETE**を見ていく。

### DELETE文の基本構文
テーブルは残したまま、すべての行を削除するDELETE文は以下のようになる。
```sql
DELETE FROM <テーブル名>;
```
`Sshohin`テーブルのデータを削除して空っぽにするならば以下のようになる。
```sql
DELETE FROM Shohin;
```
#### 失敗例
**①FROMをつけ忘れる**
```sql
DELETE <テーブル名>;
```
これが失敗する理由としては、削除対象がテーブルではなく、あくまでテーブルに含まれる「行（レコード）」であること。

**②列名を含めてしまう**
```sql
DELETE <列名> FROM <テーブル名>;
```
**DELETE**文における削除対象が、列ではなく行なので、**DELETE**文で一部の列を削除することはできない。
したがって、**DELETE**文で列名を指定することはできない。
また、以下のようにアスタリスクを使うこともできない。
```sql
DELETE * FROM Shohin;
```

### 削除対象を制限したDELETE文（探索型DELETE）
テーブルの全行ではなく、一部の行だけを削除する場合は、**SELECT**文と同様に**WHERE**句で条件を指定する。
このように削除対象のレコードを制限した**DELETE**文のことを、「**探索型DELETE**」という。
探索型DELETEの構文は以下のとおり。
```sql
DELETE FROM <テーブル名>
 WHERE <条件>;
```
`Shohin`テーブルから削除してみる。
現状こんな感じ。
```sql
SELECT * FROM Shohin;
 shohin_id |   shohin_mei   | shohin_bunrui | hanbai_tanka | shiire_tanka |  torokubi  
-----------+----------------+---------------+--------------+--------------+------------
 0001      | Tシャツ        | 衣服          |         1000 |          500 | 2009-09-20
 0002      | 穴あけパンチ   | 事務用品      |          500 |          320 | 2009-09-11
 0003      | カッターシャツ | 衣服          |         4000 |         2800 | 
 0004      | 包丁           | キッチン用品  |         3000 |         2800 | 2009-09-20
 0005      | 圧力鍋         | キッチン用品  |         6800 |         5000 | 2009-01-15
 0006      | フォーク       | キッチン用品  |          500 |              | 2009-09-20
 0007      | おろしがね     | キッチン用品  |          880 |          790 | 2008-04-28
 0008      | ボールペン     | 事務用品      |          100 |              | 2009-11-11
(8 rows)
```
たとえば、販売単価が4000円以上のものを削除したいとき、以下のようになる。
```sql
DELETE FROM Shohin
 WHERE hanbai_tanka >= 4000;
DELETE 2
```
確認
```sql
SELECT * FROM Shohin;
 shohin_id |  shohin_mei  | shohin_bunrui | hanbai_tanka | shiire_tanka |  torokubi  
-----------+--------------+---------------+--------------+--------------+------------
 0001      | Tシャツ      | 衣服          |         1000 |          500 | 2009-09-20
 0002      | 穴あけパンチ | 事務用品      |          500 |          320 | 2009-09-11
 0004      | 包丁         | キッチン用品  |         3000 |         2800 | 2009-09-20
 0006      | フォーク     | キッチン用品  |          500 |              | 2009-09-20
 0007      | おろしがね   | キッチン用品  |          880 |          790 | 2008-04-28
 0008      | ボールペン   | 事務用品      |          100 |              | 2009-11-11
(6 rows)
```

**SELECT**文と違って、**DELETE**文には**GROUP BY、HABING、ORDER BY**の3つの句は使えない。
使えるのは、**WHERE**句だけである。
**GROUP BY**や**HAVING**は、元となるテーブルからデータを抽出するときに、「抽出する形を変えたい」ときに使うもの。
**ORDER BY**は結果の表示順を指定するのが目的。
テーブルのデータそのものを削除するときには、そもそも出番がない。

### 削除と切り捨て
テーブルからテータを削除する方法として、標準SQLで用意されているのは**DELETE**文だけだが、多くのデータベース製品には、「**TRUNCATE**」というコマンドが用意されている。
構文は以下のとおり。
```sql
TRUNCATE <テーブル名>;
```
**TRUNCATE**は*＊DELETE**と違って必ずテーブルを全行削除する。
条件を指定して一部の行だけを削除することができない。
細かい制御ができないが、高速であるというメリットもある。
全行削除するなら、**TRUNCATE**を使った方が速い。

